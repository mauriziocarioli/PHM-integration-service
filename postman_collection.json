{
	"info": {
		"_postman_id": "e10364b1-84cc-4fcd-8c7e-c06d925220e2",
		"name": "Demos",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "PHM-demo",
			"item": [
				{
					"name": "Call Decision Service",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "pamAdmin",
									"type": "string"
								},
								{
									"key": "password",
									"value": "redhatpam1!",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"warning": "This is a duplicate header and will be overridden by the Authorization header generated by Postman.",
								"key": "Authorization",
								"value": "Basic a2llLXNlcnZlcjpraWUtc2VydmVy"
							},
							{
								"key": "X-KIE-ContentType",
								"value": "JSON"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\"lookup\": \"myStateless\",\n    \"commands\": [\n        {\n            \"insert\": {\n                \"object\": {\n                    \"com.health_insurance.phm_model.Trigger\": {\n\t\t\t\t\t\t\"triggerId\" : 184,\n\t\t\t\t\t\t\"memberId\" : \"test123\"\n\t\t\t\t\t}\n                },\n                \"out-identifier\": \"fact_184\",\n                \"return-object\": true\n            }\n        },                \n        {\n            \"fire-all-rules\": {\n                \"max\": -1,\n                \"out-identifier\": \"fired\"\n            }\n        },\n        {\n            \"get-objects\": {\n                \"out-identifier\": \"result_facts\"\n            }\n        }\n    ]\n}"
						},
						"url": {
							"raw": "http://localhost:8080/kie-server/services/rest/server/containers/instances/PHM-Rules",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"kie-server",
								"services",
								"rest",
								"server",
								"containers",
								"instances",
								"PHM-Rules"
							]
						}
					},
					"response": []
				},
				{
					"name": "Send a Trigger to kafka topic",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"triggerId\": 184,\n  \"memberId\": \"test123\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/kie-server/services/rest/server/containers/instances/PHM-Rules",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"kie-server",
								"services",
								"rest",
								"server",
								"containers",
								"instances",
								"PHM-Rules"
							]
						}
					},
					"response": []
				},
				{
					"name": "Start a new Trigger Process instance sending a payload",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "redhatpam1!",
									"type": "string"
								},
								{
									"key": "username",
									"value": "pamAdmin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"pDataList\": [\n        {\n            \"com.health_insurance.phm_model.Response\": {\n                \"task\": {\n                    \"id\": 48,\n                    \"origId\": \"B104\",\n                    \"description\": \"Pharmacist action\",\n                    \"status\": null,\n                    \"predecessor\": null,\n                    \"suppressed\": false,\n                    \"suppressionPeriod\": null,\n                    \"expirationDate\": 1609390800000,\n                    \"reminderInitiation\": \"P1000M\",\n                    \"reminderFrequency\": \"R/P1000M\",\n                    \"escalated\": null,\n                    \"escalationTimer\": \"P1000M\",\n                    \"close\": \"SOFT\",\n                    \"closeSignal\": null\n                },\n                \"assignment\": {\n                    \"actor\": \"Peter\",\n                    \"channel\": \"CCN\",\n                    \"escalationActor\": \"Allison\",\n                    \"escalationChannel\": \"CCN\"\n                },\n                \"reminder\": {\n                    \"address\": \"allison@healthinsurance.com\",\n                    \"subject\": \"Reminder\",\n                    \"body\": \"Hello Peter, this is a friendly reminder that you have to complete your task.\",\n                    \"from\": \"PHM@healthinsurance.com\"\n                }\n            }\n        },\n        {\n            \"com.health_insurance.phm_model.Response\": {\n                \"task\": {\n                    \"id\": 76,\n                    \"origId\": \"C123.0\",\n                    \"description\": \"Provider action\",\n                    \"status\": null,\n                    \"predecessor\": null,\n                    \"suppressed\": false,\n                    \"suppressionPeriod\": null,\n                    \"expirationDate\": 1609390800000,\n                    \"reminderInitiation\": \"P14D\",\n                    \"reminderFrequency\": \"R/P14D\",\n                    \"escalated\": null,\n                    \"escalationTimer\": \"P30D\",\n                    \"close\": \"SOFT\",\n                    \"closeSignal\": null\n                },\n                \"assignment\": {\n                    \"actor\": \"Robert\",\n                    \"channel\": \"MCC\",\n                    \"escalationActor\": \"Matthew\",\n                    \"escalationChannel\": \"CCN\"\n                },\n                \"reminder\": {\n                    \"address\": \"robert@pharmacy.com\",\n                    \"subject\": \"Reminder\",\n                    \"body\": \"Hello Peter, this is a friendly reminder that you have to complete your task.\",\n                    \"from\": \"PHM@healthinsurance.com\"\n                }\n            }\n        }\n    ]\n}"
						},
						"url": {
							"raw": "http://localhost:8080/kie-server/services/rest/server/containers/PHM-Processes/processes/PHM-Processes.Trigger/instances",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"kie-server",
								"services",
								"rest",
								"server",
								"containers",
								"PHM-Processes",
								"processes",
								"PHM-Processes.Trigger",
								"instances"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"protocolProfileBehavior": {}
}